[gd_scene load_steps=27 format=3 uid="uid://djdldu26nyhbc"]

[ext_resource type="Script" path="res://Scenes/Characters/Player/player.gd" id="1_n0nwc"]
[ext_resource type="Script" path="res://Scenes/Resources/player_data.gd" id="2_18bkj"]
[ext_resource type="PackedScene" uid="uid://doyksevus16f" path="res://Scenes/Characters/StateMachine/state_machine.tscn" id="2_eiog5"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/idle.gd" id="3_ft4uc"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/walk.gd" id="4_65blh"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/run.gd" id="5_sy8rs"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/dead.gd" id="6_rfksk"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/attack.gd" id="7_cooyn"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/jump.gd" id="8_fwlt2"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/fall.gd" id="9_n8ybp"]
[ext_resource type="PackedScene" uid="uid://ij55h76o6gpt" path="res://Assets/Player/jackflash.glb" id="11_mht60"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/stomp.gd" id="11_tp26j"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/take.gd" id="12_vcotw"]
[ext_resource type="PackedScene" uid="uid://y65bdhojbflr" path="res://Scenes/Components/collecter.tscn" id="13_dmwfb"]
[ext_resource type="Script" path="res://Scenes/Characters/StateMachine/Player/drop.gd" id="13_ojjwm"]
[ext_resource type="PackedScene" uid="uid://bleopqiwbkc2j" path="res://Scenes/Components/damager.tscn" id="14_lcs70"]
[ext_resource type="FontFile" uid="uid://dndckiai2p8e8" path="res://Assets/Fonts/kirifont/KiriFont.otf" id="14_x45e7"]
[ext_resource type="PackedScene" uid="uid://b4got68cjiyts" path="res://Scenes/Components/stomper.tscn" id="15_xejk6"]
[ext_resource type="PackedScene" uid="uid://ymwkvva7ij8p" path="res://Scenes/Components/attacker.tscn" id="16_veng2"]
[ext_resource type="PackedScene" uid="uid://4w341vum13i7" path="res://Scenes/Particles/elvis_lightning.tscn" id="19_4wa40"]

[sub_resource type="Resource" id="Resource_360yg"]
script = ExtResource("2_18bkj")
life = 3

[sub_resource type="CylinderShape3D" id="CylinderShape3D_scpy4"]
height = 1.85
radius = 0.78

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_u4v3j"]
radius = 0.469

[sub_resource type="CylinderShape3D" id="CylinderShape3D_0owpg"]
height = 0.139

[sub_resource type="BoxShape3D" id="BoxShape3D_uugei"]
size = Vector3(0.35, 0.33, 1.87)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1qwxv"]

[node name="Player" type="CharacterBody3D" groups=["Player"]]
collision_mask = 176
script = ExtResource("1_n0nwc")
player_data = SubResource("Resource_360yg")
metadata/_edit_group_ = true

[node name="StateMachine" parent="." node_paths=PackedStringArray("initial_state") instance=ExtResource("2_eiog5")]
initial_state = NodePath("idle")

[node name="idle" type="Node" parent="StateMachine"]
script = ExtResource("3_ft4uc")

[node name="walk" type="Node" parent="StateMachine"]
script = ExtResource("4_65blh")

[node name="run" type="Node" parent="StateMachine"]
script = ExtResource("5_sy8rs")

[node name="dead" type="Node" parent="StateMachine"]
script = ExtResource("6_rfksk")

[node name="attack" type="Node" parent="StateMachine"]
script = ExtResource("7_cooyn")

[node name="jump" type="Node" parent="StateMachine"]
script = ExtResource("8_fwlt2")

[node name="fall" type="Node" parent="StateMachine"]
script = ExtResource("9_n8ybp")

[node name="stomp" type="Node" parent="StateMachine"]
script = ExtResource("11_tp26j")

[node name="take" type="Node" parent="StateMachine"]
script = ExtResource("12_vcotw")

[node name="drop" type="Node" parent="StateMachine"]
script = ExtResource("13_ojjwm")

[node name="Visual" type="Node3D" parent="."]

[node name="InfoAction" type="Label3D" parent="Visual"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.12736, 0)
font = ExtResource("14_x45e7")

[node name="jackflash" parent="Visual" instance=ExtResource("11_mht60")]

[node name="Skeleton3D" parent="Visual/jackflash/Armature" index="0"]
bones/0/position = Vector3(-3.18828, 1.05357, -75.8752)
bones/0/rotation = Quaternion(-0.572776, -0.29702, 0.345552, 0.681397)
bones/1/position = Vector3(2.98021e-07, 10.5288, -0.610596)
bones/1/rotation = Quaternion(0.00143337, 0.032997, -0.0260373, 0.999115)
bones/2/position = Vector3(9.53674e-07, 11.377, 1.85446e-07)
bones/2/rotation = Quaternion(-0.0301828, 0.00882147, 0.0220766, 0.999262)
bones/3/position = Vector3(-3.8743e-07, 14.062, -5.92587e-07)
bones/3/rotation = Quaternion(-0.0363799, 0.00884442, 0.0115818, 0.999232)
bones/4/position = Vector3(1.19209e-07, 10.5239, -5.58086e-06)
bones/4/rotation = Quaternion(0.00430931, 0.0861326, 0.00681101, 0.996251)
bones/5/position = Vector3(1.43051e-06, 13.6067, 1.7629)
bones/5/rotation = Quaternion(0.18669, 0.203365, -0.0495093, 0.959864)
bones/6/position = Vector3(1.90735e-06, 31.5912, -0.362567)
bones/7/position = Vector3(1.19211e-07, 0.532054, 24.4119)
bones/8/position = Vector3(1.43051e-06, 0.501598, -17.8457)
bones/9/position = Vector3(15.0128, 10.6563, 2.63676)
bones/9/rotation = Quaternion(0.478763, 0.587015, -0.556533, 0.341277)
bones/10/position = Vector3(-8.39342e-07, 29.1325, 5.11756e-07)
bones/10/rotation = Quaternion(0.350549, 0.147004, 0.327497, 0.865015)
bones/11/position = Vector3(2.03471e-06, 29.7871, 2.39209e-05)
bones/11/rotation = Quaternion(0.192933, -0.206142, 0.696212, 0.659978)
bones/12/position = Vector3(-5.13534e-06, 27.9074, -1.26113e-05)
bones/12/rotation = Quaternion(0.0456392, -0.00140067, 0.0182764, 0.99879)
bones/13/position = Vector3(-5.74348, 4.68105, 3.26781)
bones/13/rotation = Quaternion(0.353663, 0.0257896, 0.143528, 0.923936)
bones/14/position = Vector3(-0.917277, 7.0469, -9.95366e-07)
bones/14/rotation = Quaternion(-0.0381874, 0.10877, -0.0858274, 0.989618)
bones/15/position = Vector3(0.154227, 6.55526, 1.71244e-06)
bones/15/rotation = Quaternion(0.28315, 0.406388, -0.103674, 0.862512)
bones/16/position = Vector3(0.763068, 4.3391, -2.40952e-05)
bones/17/position = Vector3(-4.61791, 18.6648, 0.00162412)
bones/17/rotation = Quaternion(0.63448, 0.0362271, 0.066127, 0.769253)
bones/18/position = Vector3(-0.00122046, 3.24587, -2.2592e-06)
bones/18/rotation = Quaternion(0.552908, 0.0238845, 0.0522488, 0.83126)
bones/19/position = Vector3(-0.0309666, 3.81625, -1.24676e-05)
bones/19/rotation = Quaternion(0.57053, 0.00977136, 0.0171199, 0.82104)
bones/20/position = Vector3(0.0321715, 3.83143, 8.34465e-06)
bones/21/position = Vector3(0.576661, 18.5081, -0.635198)
bones/21/rotation = Quaternion(0.673019, -0.0456687, -0.00112068, 0.738213)
bones/22/position = Vector3(-0.0307111, 3.37717, -2.60713e-06)
bones/22/rotation = Quaternion(0.618752, 0.029752, 0.0419507, 0.783901)
bones/23/position = Vector3(-0.0101254, 4.50402, -3.23357e-06)
bones/23/rotation = Quaternion(0.553708, 0.00620886, -0.0011589, 0.832687)
bones/24/position = Vector3(0.0408346, 4.0926, -2.19941e-05)
bones/25/position = Vector3(4.76968, 17.7314, -0.823307)
bones/25/rotation = Quaternion(0.696668, -0.0591051, -0.0201297, 0.714671)
bones/26/position = Vector3(-0.00813198, 2.73509, -4.04448e-06)
bones/26/rotation = Quaternion(0.517375, -0.00447498, 0.00405839, 0.855738)
bones/27/position = Vector3(0.000339113, 3.33005, -4.63151e-07)
bones/27/rotation = Quaternion(0.591154, -0.00748715, -0.0150626, 0.806384)
bones/28/position = Vector3(0.00780424, 3.25057, -2.78056e-05)
bones/29/position = Vector3(8.10767, 15.9898, -0.109702)
bones/29/rotation = Quaternion(0.666895, -0.098311, -0.0113751, 0.73855)
bones/30/position = Vector3(-0.0122564, 2.68823, 1.62701e-05)
bones/30/rotation = Quaternion(0.60238, 0.00137901, 0.0162048, 0.798044)
bones/31/position = Vector3(0.000194788, 2.4875, -6.9999e-06)
bones/31/rotation = Quaternion(0.410986, -0.0011025, 0.012809, 0.911551)
bones/32/position = Vector3(0.0120654, 1.85357, -1.53482e-05)
bones/34/position = Vector3(0.0437556, -9.00924, -4.66406e-06)
bones/36/position = Vector3(-0.0437209, -8.48444, -6.00703e-08)
bones/38/position = Vector3(0.0437273, -8.7031, -2.52761e-06)
bones/39/position = Vector3(-15.263, 10.7487, 2.43321)
bones/39/rotation = Quaternion(-0.269879, 0.652474, -0.663088, -0.248511)
bones/40/position = Vector3(-2.73065e-06, 29.2037, 1.5116e-05)
bones/40/rotation = Quaternion(0.389256, -0.184177, -0.189378, 0.882437)
bones/41/position = Vector3(1.91971e-06, 29.6836, 8.65828e-07)
bones/41/rotation = Quaternion(0.0386454, 0.0270728, -0.60461, 0.795123)
bones/42/position = Vector3(3.44184e-06, 27.5524, 5.44836e-06)
bones/42/rotation = Quaternion(0.0842769, -0.0180918, -0.209036, 0.974102)
bones/43/position = Vector3(6.53515, 4.13651, 3.09944)
bones/43/rotation = Quaternion(0.454235, -0.0521426, 0.0833479, 0.885441)
bones/44/position = Vector3(1.09124, 7.08856, -8.16611e-06)
bones/44/rotation = Quaternion(-0.107836, -0.161822, -0.0905709, 0.97672)
bones/45/position = Vector3(0.22299, 6.51443, 1.11551e-05)
bones/45/rotation = Quaternion(-0.173452, 0.137905, -0.0573289, 0.973453)
bones/46/position = Vector3(-1.31423, 4.28386, -1.38432e-05)
bones/47/position = Vector3(6.40285, 18.2758, 0.353305)
bones/47/rotation = Quaternion(0.509643, 0.0364761, 0.0118229, 0.859531)
bones/48/position = Vector3(0.0190864, 3.25793, -4.98165e-06)
bones/48/rotation = Quaternion(0.549454, -0.023302, 0.00776302, 0.835163)
bones/49/position = Vector3(0.00832081, 3.83006, -2.81006e-06)
bones/49/rotation = Quaternion(0.493517, -0.0115532, 0.0449285, 0.868498)
bones/50/position = Vector3(-0.0274067, 4.07647, 1.80639e-05)
bones/51/position = Vector3(1.19154, 18.5501, -0.0718955)
bones/51/rotation = Quaternion(0.559686, -0.00303733, -0.0360388, 0.827915)
bones/52/position = Vector3(0.013161, 3.37177, -1.32591e-06)
bones/52/rotation = Quaternion(0.671594, -0.0297325, -0.0350198, 0.739494)
bones/53/position = Vector3(0.00274329, 4.36925, 5.4827e-06)
bones/53/rotation = Quaternion(0.281392, 0.00358529, 0.0119757, 0.959512)
bones/54/position = Vector3(-0.0158943, 2.92352, 2.26498e-06)
bones/55/position = Vector3(-3.0542, 18.1118, -0.111418)
bones/55/rotation = Quaternion(0.635803, 0.017785, 0.014912, 0.771502)
bones/56/position = Vector3(0.00113642, 2.66146, -2.51006e-06)
bones/56/rotation = Quaternion(0.596606, -0.00122909, 0.0061707, 0.80251)
bones/57/position = Vector3(0.00226749, 3.20822, 5.58686e-06)
bones/57/rotation = Quaternion(0.334051, 0.0240986, 0.0258943, 0.941891)
bones/58/position = Vector3(-0.00339097, 3.28348, -9.29832e-06)
bones/59/position = Vector3(-6.49027, 16.6122, 0.681611)
bones/59/rotation = Quaternion(0.686662, 0.0288004, -0.0346467, 0.725579)
bones/60/position = Vector3(0.00223184, 2.52537, 7.38036e-06)
bones/60/rotation = Quaternion(0.456548, -0.000169576, 0.0242291, 0.889369)
bones/61/position = Vector3(-0.000384569, 2.63737, 2.15402e-06)
bones/61/rotation = Quaternion(0.223178, 0.000152101, 0.0116932, 0.974708)
bones/62/position = Vector3(-0.00184393, 1.99189, 2.72989e-05)
bones/64/position = Vector3(-0.0647079, -8.80005, 5.1558e-06)
bones/65/rotation = Quaternion(0.458957, -0.533386, 0.542882, -0.458407)
bones/66/position = Vector3(2.23331e-05, -8.86474, 1.19209e-05)
bones/67/position = Vector3(-10.7812, 4.53938, 8.71228)
bones/67/rotation = Quaternion(0.458957, -0.533386, 0.542882, -0.458407)
bones/68/position = Vector3(0.0647098, -8.86475, -7.5996e-07)
bones/74/position = Vector3(-14.9143, 10.4175, -5.93417e-08)
bones/76/rotation = Quaternion(0.324417, 0.518854, 0.741927, -0.274023)
bones/77/position = Vector3(2.71886e-07, 32.2038, 1.47703e-06)
bones/77/rotation = Quaternion(-0.530577, 0.147707, -0.03106, 0.83409)
bones/78/position = Vector3(2.19127e-06, 32.4774, -8.69755e-07)
bones/78/rotation = Quaternion(0.274588, -0.0155559, -0.111418, 0.954958)
bones/79/position = Vector3(-0.0123687, 30.2028, 0.100704)
bones/79/rotation = Quaternion(0.97775, 0.013049, 0.0202554, 0.208386)
bones/80/position = Vector3(6.02186e-05, -7.97212e-05, -15.6875)
bones/81/rotation = Quaternion(-0.211585, 0.212335, 0.893699, 0.333837)
bones/82/position = Vector3(4.39918e-06, 32.2067, -1.28512e-06)
bones/82/rotation = Quaternion(-0.468352, -0.0417516, -0.0179837, 0.882372)
bones/83/position = Vector3(2.80782e-06, 32.277, -3.09912e-07)
bones/83/rotation = Quaternion(0.445467, 0.0653637, 0.304589, 0.839352)
bones/84/position = Vector3(0.0128691, 30.2208, 0.109883)
bones/84/rotation = Quaternion(0.968183, 0.00760861, -0.0494755, 0.245187)
bones/85/position = Vector3(-4.34346e-05, 0.569594, -15.8093)

[node name="Components" type="Node3D" parent="Visual"]

[node name="Collecter" parent="Visual/Components" instance=ExtResource("13_dmwfb")]

[node name="TakerMarker" type="Marker3D" parent="Visual/Components/Collecter"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0447026, 2.2842, 0.0465897)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visual/Components/Collecter"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.967056, 0)
shape = SubResource("CylinderShape3D_scpy4")

[node name="Damager" parent="Visual/Components" instance=ExtResource("14_lcs70")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visual/Components/Damager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.928006, 0)
shape = SubResource("CapsuleShape3D_u4v3j")

[node name="Stomper" parent="Visual/Components" instance=ExtResource("15_xejk6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.693222, 0)
collision_layer = 8
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visual/Components/Stomper"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.524282, 0)
shape = SubResource("CylinderShape3D_0owpg")
disabled = true

[node name="Attacker" parent="Visual/Components" instance=ExtResource("16_veng2")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Visual/Components/Attacker"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0751329, 1.20089, 1.42691)
shape = SubResource("BoxShape3D_uugei")
disabled = true

[node name="ElvisLightning" parent="Visual/Components" instance=ExtResource("19_4wa40")]
transform = Transform3D(-0.00139622, 0, -0.999999, 0, 1, 0, 0.999999, 0, -0.00139622, 0, 1.16754, 0.917899)

[node name="CollisionShape3D" type="CollisionShape3D" parent="." groups=["Player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.994719, 0)
shape = SubResource("CapsuleShape3D_1qwxv")

[connection signal="animation_finished" from="Visual/jackflash/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="player_collected" from="Visual/Components/Collecter" to="." method="_on_collecter_player_collected"]
[connection signal="player_uncollected" from="Visual/Components/Collecter" to="." method="_on_collecter_player_uncollected"]

[editable path="Visual/jackflash"]
